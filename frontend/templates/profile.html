{% extends 'base.html' %}
{% load static %}

{% block title %}–í–ê–® –ü–†–û–§–ò–õ–¨{% endblock %}

{% block content %}
<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–æ—Ñ–∏–ª—è -->
<div class="profile-container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è -->
  <h1 class="profile-title">–í–ê–® –ü–†–û–§–ò–õ–¨</h1>

  <!-- –°–µ–∫—Ü–∏—è –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫) -->
  <details class="user-info">
    <summary>üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</summary>  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ —Å –∏–∫–æ–Ω–∫–æ–π -->
    <div class="user-info-content">
      <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
      <p><strong>–ò–º—è:</strong> {{ userprofile.first_name }}</p>
      <p><strong>–§–∞–º–∏–ª–∏—è:</strong> {{ userprofile.second_name }}</p>
      <!-- –û—Ç—á–µ—Å—Ç–≤–æ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –æ–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ -->
      <p><strong>–û—Ç—á–µ—Å—Ç–≤–æ:</strong> {{ userprofile.third_name|default:"‚Äî" }}</p>
      <!-- –¢–µ–ª–µ—Ñ–æ–Ω —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω -->
      <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ userprofile.phone|default:"‚Äî" }}</p>
      <!-- Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ) -->
      {% if userprofile.email %}<p><strong>–ü–æ—á—Ç–∞:</strong> {{ userprofile.email }}</p> {%endif%}
      <!-- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–µ–Ω—å.–º–µ—Å—è—Ü.–≥–æ–¥ -->
      <p><strong>–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ userprofile.date_birth|date:"d.m.Y" }}</p>
    </div>
  </details>

  <!-- –°–µ–∫—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ -->
  <h2 class="order-history-title">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
  
  <!-- –¶–∏–∫–ª –ø–æ –≤—Å–µ–º –∑–∞–∫–∞–∑–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
  {% for order in orders %}
    <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ -->
    <div class="order-block">
      <!-- –ù–æ–º–µ—Ä –∏ –¥–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ -->
      <p><strong>–ó–∞–∫–∞–∑ ‚Ññ{{ order.id }}</strong> –æ—Ç {{ order.date_at|date:"d.m.Y" }}</p>
      <!-- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è get_status_display –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è) -->
      <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ order.get_status_display }}</p>
      <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
      <p><strong>–û–ø–ª–∞—Ç–∞:</strong> {{ order.get_type_payment_display }}</p>
      <!-- –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–ª–∏ –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ -->
      <p><strong>–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏:</strong> {{ order.address|default:"‚Äî" }}</p>

      <!-- –¢–∞–±–ª–∏—Ü–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –≤ –∑–∞–∫–∞–∑–µ -->
      <table class="order-table">
        <thead>
          <tr>
            <th>–¢–æ–≤–∞—Ä</th>
            <th>–¶–≤–µ—Ç</th>
            <th>–†–∞–∑–º–µ—Ä</th>
            <th>–ö–æ–ª-–≤–æ</th>
            <th>–¶–µ–Ω–∞</th>
            <th>–ò—Ç–æ–≥–æ</th>
          </tr>
        </thead>
        <tbody>
          <!-- –¶–∏–∫–ª –ø–æ —Ç–æ–≤–∞—Ä–∞–º –≤ –∑–∞–∫–∞–∑–µ -->
          {% for item in order.items.all %}
            <tr>
              <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ -->
              <td>{{ item.product.name }}</td>
              <!-- –¶–≤–µ—Ç —Ç–æ–≤–∞—Ä–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∫—Ä—É–∂–∫–æ–º -->
              <td>
                {% if item.color %}
                  <span class="color-circle" style="background-color: {{ item.color.hex_code }}"></span>
                  {{ item.color.name }}
                {% else %}
                  ‚Äî  <!-- –ï—Å–ª–∏ —Ü–≤–µ—Ç –Ω–µ —É–∫–∞–∑–∞–Ω -->
                {% endif %}
              </td>
              <!-- –†–∞–∑–º–µ—Ä —Ç–æ–≤–∞—Ä–∞ -->
              <td>
                {% if item.size %}
                  {{ item.size.name }}
                {% else %}
                  ‚Äî  <!-- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω -->
                {% endif %}
              </td>
              <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
              <td>{{ item.quantity }}</td>
              <!-- –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É -->
              <td>{{ item.price }} ‚ÇΩ</td>
              <!-- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ -->
              <td>{{ item.total_price }} ‚ÇΩ</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <!-- –û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ -->
      <p class="order-total">–û–±—â–∞—è —Å—É–º–º–∞: <strong>{{ order.total_price }} ‚ÇΩ</strong></p>
    </div>
  {% empty %}
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–µ—Ç -->
    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤.</p>
  {% endfor %}
</div>
{% endblock %}